# https://stackoverflow.com/a/15650828/2298061

getPackages <- function(packs) {
  packages <- unlist(
    tools::package_dependencies(
      packs,
      available.packages(),
      which = c("Depends", "Imports"),
      recursive = TRUE
    )
  )
  packages <- union(packs, packages)
  packages
}

packages <- getPackages(
  c(
    "assertthat",
    "base64enc",
    "bindr",
    "bindrcpp",
    "bit64",
    "bit",
    "blob",
    "caret",
    "cli",
    "colorspace",
    "crayon",
    "crosstalk",
    "data.table",
    "DBI",
    "digest",
    "dplyr",
    "DT",
    "fansi",
    "ggplot2",
    "glue",
    "gridExtra",
    "gtable",
    "htmltools",
    "htmlwidgets",
    "httpuv",
    "jsonlite",
    "labeling",
    "later",
    "lattice",
    "lazyeval",
    "leaflet",
    "logging",
    "magrittr",
    "markdown",
    "MASS",
    "Matrix",
    "memoise",
    "mgcv",
    "mice",
    "mime",
    "munsell",
    "nlme",
    "openxlsx",
    "party",
    "pillar",
    "pkgconfig",
    "plyr",
    "png",
    "prettyunits",
    "promises",
    "purrr",
    "R6",
    "raster",
    "RColorBrewer",
    "Rcpp",
    "readr",
    "reshape2",
    "rlang",
    "RODBC",
    "rpart",
    "RSQLite",
    "scales",
    "shiny",
    "shinycssloaders",
    "shinydashboard",
    "shinydashboardPlus",
    "shinyjs",
    "shinyTime",
    "skimr",
    "sourcetools",
    "sp",
    "stringi",
    "stringr",
    "tibble",
    "tidyr",
    "tidyselect",
    "utf8",
    "udunits2",
    "viridis",
    "viridisLite",
    "withr",
    "xml",
    "xtable",
    "yaml",
    "zip"
   )
)

download.packages(packages,
                  destdir = getwd(),
                  type    = "win.binary")
